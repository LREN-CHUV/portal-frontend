<div class="dataset-box">
  <div class="dataset-container">
    <div class="panel style="flex: 0 0 0">
      <div class="panel-heading">Datasets</div>
      <div class="panel-body">
        <ul class="list-group">
          <li
            ng-repeat="dataset in allDatasets"
            class="list-group-item"
            ng-class="{active: isDatasetSelected(dataset.code)}">
            <a
              href=""
              ng-click="selectDataset(dataset.code)"
            >{{dataset.code}}</a>
          </li>
        </ul>
      </div>
    </div>
    <div class="panel" style="flex: 0 0 1">
      <div class="panel-heading">Model</div>
      <div class="panel-body dataset-list scrollable">
        <h5>Variable </h5>
        <p ng-repeat="variable in query.variables">
          <a
            ng-click="selectVariable(variable)"
            class="active">
            {{variable.code}}
          </a>
        </p>
        <h5>CoVariables</h5>
        <p ng-repeat="covariable in query.coVariables">
          <a
            ng-click="selectVariable(covariable)"
            ng-class="{active: isSelected(covariable)}">
            {{covariable.code}}
          </a>
        </p>
        <h5>Groupings</h5>
        <p ng-repeat="covariable in query.groupings">
          <a
            ng-click="selectVariable(covariable)"
            ng-class="{active: isSelected(covariable)}">
            {{covariable.code}}
          </a>
        </p>
        <h5>
            <a ng-click="configureFilterQuery()">
                <i class="ti ti-panel"></i>
            </a>
            Filter variable
        </h5>
        <p ng-repeat="filter in query.filters">
            <a ng-click="configureFilterQuery()">
                {{filter.code}}
            </a>
        </p>
        <div class="query" ng-bind="query.textQuery"></div>
      </div>
    </div>
    <div class="panel" style="flex-grow: 2">
      <uib-tabset active="active">

        <uib-tab index="0" heading="Table">
          <div class="panel-body scrollable">
            <div ng-if="loading" class="loading">
              <div class="fa fa-spin fa-spinner"></div>
            </div>
            <div ng-if="error">
              There was an error perfoming the method
              <pretty-json data="error"></pretty-json>
            </div>
            <div ng-if="tableHeader"
              style="background-color: #d5e5fd; padding: 0.5em">
              <table class="table">
                <tr style="background-color: transparent">
                  <th ng-repeat="column in tableHeader track by $index">
                    <h6 style="text-transform: uppercase">{{column}}</h6>
                  </th>
                </tr>
                <tr
                  ng-repeat="row in tableRows track by $index"
                  ng-class="{ 'white-row': row.type !== 'header' }">
                  <td class="header-row">{{row.label || row.index}}</td>
                  <td ng-repeat="column in row.data track by $index" ng-bind-html="column"></td>
                </tr>
              </table>
            </div>
          </div>
        </uib-tab>

        <uib-tab index="1" heading="Histogram">
            <div class="panel-body scrollable">
                <div ng-if="histogramLoading" class="loading">
                  <div class="fa fa-spin fa-spinner"></div>
                </div>
                <div ng-if="histogramError">
                  There was an error perfoming the method
                  <pretty-json data="histogramError"></pretty-json>
                </div>
                <div ng-if="histogramData" ng-repeat="data in histogramData">
                    <highchart config="data"></highchart>
                </div>
              </div>
        </uib-tab>

        <!-- <uib-tab index="2" heading="t-SNE">
          <div class="panel-body scrollable">
            <div ng-if="tsneLoading" class="loading">
              <div class="fa fa-spin fa-spinner"></div>
            </div>
            <div ng-if="histogramError">
                There was an error perfoming the method
                <pretty-json data="histogramError"></pretty-json>
            </div>
            <highchart ng-if="tsneData" config="tsneData"></highchart>
          </div>
        </uib-tab> -->

      </uib-tabset>
    </div>
  </div>
  <div class="dataset-footer panel">
    Some statistical data
  </div>

  <div class="execute">
  <rounded-button
    label="{{'common.button.execute' | translate}}"
    icon-class="ti {{ loading_model ? 'ti-reload ti-spin reverse-direction' : 'ti-arrow-down' }}"
    on-click="open_experiment()">
  </rounded-button>
  </div>
</div>
